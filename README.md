üì∞ NestJS Articles API

üìÑ –ü—Ä–æ—Å—Ç–æ–π —É—á–µ–±–Ω—ã–π –∏ production-ready CRUD-—Å–µ—Ä–≤–∏—Å –Ω–∞ NestJS + TypeORM + MySQL
CRUD –¥–ª—è —Å—Ç–∞—Ç–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–æ–ª–∏ (admin/user), OwnerOrAdminGuard, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞—â–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤, Swagger, –º–∏–≥—Ä–∞—Ü–∏–∏.

üì¶ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

NestJS, TypeORM

MySQL (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ XAMPP)

class-validator, class-transformer

JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, RBAC (admin/user)

Swagger UI

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (interceptor)

REST API

üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

git clone https://github.com/<—Ç–≤–æ–π-–ª–æ–≥–∏–Ω>/<–∏–º—è-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>.git
cd <–∏–º—è-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>

–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

npm install

–ù–∞—Å—Ç—Ä–æ–π .env

–°–∫–æ–ø–∏—Ä—É–π/—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª .env:

DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=
DB_DATABASE=nestjs_articles_db
JWT_SECRET=your_jwt_secret
JWT_REFRESH_SECRET=your_refresh_secret

‚ö†Ô∏è –£–±–µ–¥–∏—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö nestjs_articles_db —Å–æ–∑–¥–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ XAMPP: http://localhost/phpmyadmin)

–ü—Ä–æ–≥–æ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

npx typeorm-ts-node-commonjs migration:run -d data-source.ts

–ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

npm run start:dev

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  http://localhost:3000

üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

–ú–µ—Ç–æ–¥

URL

–û–ø–∏—Å–∞–Ω–∏–µ

–î–æ—Å—Ç—É–ø

GET

/articles

–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—å–∏

üîì –ü—É–±–ª–∏—á–Ω—ã–π

GET

/articles/:id

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ ID

üîì –ü—É–±–ª–∏—á–Ω—ã–π

POST

/articles

–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é

üîê –¢—Ä–µ–±—É–µ—Ç JWT

PUT

/articles/:id

–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ ID

üîê –¢—Ä–µ–±—É–µ—Ç JWT + author/admin

DELETE

/articles/:id

–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é –ø–æ ID

üîê –¢—Ä–µ–±—É–µ—Ç JWT + author/admin

–ú–µ—Ç–æ–¥

URL

–û–ø–∏—Å–∞–Ω–∏–µ

–î–æ—Å—Ç—É–ø

GET

/users

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

üîê JWT

GET

/users/:id

–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

üîê JWT

POST

/users

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîì –ü—É–±–ª–∏—á–Ω—ã–π

PUT

/users/:id

–û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîê JWT + owner/admin

DELETE

/users/:id

–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

üîê JWT + admin

–ú–µ—Ç–æ–¥

URL

–û–ø–∏—Å–∞–Ω–∏–µ

–î–æ—Å—Ç—É–ø

POST

/auth/login

–õ–æ–≥–∏–Ω

üîì –ü—É–±–ª–∏—á–Ω—ã–π

POST

/auth/refresh

–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω

üîì –ü—É–±–ª–∏—á–Ω—ã–π

POST

/auth/logout

–í—ã—Ö–æ–¥

üîê JWT

‚úÖ –ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (POST / PUT)

{
  "title": "–ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è",
  "content": "–≠—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç—å–∏.",
  "published": true
}

üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT)

–ü–æ–ª—É—á–∏ access_token —á–µ—Ä–µ–∑ POST /auth/login

–£–∫–∞–∂–∏ —Ç–æ–∫–µ–Ω –≤ Swagger (Authorize) –∏–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

Authorization: Bearer <—Ç–≤–æ–π-—Ç–æ–∫–µ–Ω>

–î–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ (POST/PUT/DELETE) —Ç—Ä–µ–±—É–µ—Ç—Å—è JWT

üß© –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (RBAC)

User:

–û–±–Ω–æ–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ admin

Article:

–û–±–Ω–æ–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä —Å—Ç–∞—Ç—å–∏ –∏–ª–∏ admin

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Guard OwnerOrAdminGuard (—Å–º. –∏—Å—Ö–æ–¥–Ω–∏–∫–∏)

üìö Swagger UI

–û—Ç–∫—Ä—ã–≤–∞–π http://localhost:3000/api/docs

–ü–æ–ª–Ω—ã–µ —Å—Ö–µ–º—ã, –ø—Ä–∏–º–µ—Ä—ã, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Bearer Token

–ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã "–≤–∂–∏–≤—É—é" (—á–µ—Ä–µ–∑ "Authorize")

üõ† –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–°–∫—Ä–∏–ø—Ç

–û–ø–∏—Å–∞–Ω–∏–µ

npm run start:dev

–ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

npm run start

–ü—Ä–æ–¥–∞–∫—à–Ω –∑–∞–ø—É—Å–∫ (build + run)

npm run test:e2e

E2E-—Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

üóÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

–§–∞–π–ª—ã ‚Äî –≤ migrations/

–ó–∞–ø—É—Å–∫:

npx typeorm-ts-node-commonjs migration:run -d data-source.ts

üí° –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

src/article/ ‚Äî –≤—Å—ë –¥–ª—è —Å—Ç–∞—Ç–µ–π (entity, controller, service, dto)

src/user/ ‚Äî –≤—Å—ë –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

src/auth/ ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, Guard'—ã, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

src/common/interceptors/ ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

src/main.ts ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞–π–ø—ã, —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, Swagger

ü¶æ Security best practices

–ü–∞—Ä–æ–ª–∏ –∏ refresh-—Ç–æ–∫–µ–Ω—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—Ç–≤–µ—Ç—ã API (—Å–º. @Exclude + class-transformer)

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —á–µ—Ä–µ–∑ Guard'—ã

UserId —Ç–æ–ª—å–∫–æ –∏–∑ —Ç–æ–∫–µ–Ω–∞, –Ω–µ –∏–∑ body

–ì–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è DTO, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ


üë®‚Äçüíª –ê–≤—Ç–æ—Ä

IhZhur